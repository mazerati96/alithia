<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Collaborator Dashboard â€” Alithia</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Cormorant+Garamond:ital,wght@0,300;1,300&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../css/navigation.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
</head>
<body>

    <canvas id="bg-canvas"></canvas>
    <div class="vignette"></div>

    <!-- Hamburger -->
    <div class="hamburger-menu" id="hamburger">
        <span></span><span></span><span></span>
    </div>

    <!-- Nav Overlay -->
    <div class="nav-overlay" id="navOverlay">
        <ul class="nav-menu">
            <li><a href="worldmap.html">WORLD MAP</a></li>
            <li><a href="lore.html">LORE CODEX</a></li>
            <li><a href="factions.html">FACTIONS</a></li>
            <li><a href="characters.html">CHARACTERS</a></li>
            <li><a href="updates.html">UPDATES</a></li>
            <li><a href="dashboard.html" class="active">DASHBOARD</a></li>
        </ul>
    </div>

    <div class="page-transition"></div>

    <!-- Auth guard overlay â€” shown while checking auth, hidden once confirmed -->
    <div class="auth-guard" id="authGuard">
        <div class="auth-guard-inner">
            <div class="guard-rune">áš±</div>
            <p>Verifying your passageâ€¦</p>
        </div>
    </div>

    <!-- Dashboard (hidden until auth confirmed) -->
    <div class="dashboard-wrap hidden" id="dashboardWrap">

        <!-- Top bar -->
        <header class="dash-topbar">
            <div class="dash-topbar-left">
                <a href="worldmap.html" class="topbar-home">
                    <span class="topbar-glyph">âœ¦</span> Alithia
                </a>
                <span class="topbar-divider">|</span>
                <span class="topbar-label">Collaborator Dashboard</span>
            </div>
            <div class="dash-topbar-right">
                <span class="topbar-username" id="topbarUsername">â€”</span>
                <button class="signout-btn" id="signOutBtn">Sign Out</button>
            </div>
        </header>

        <!-- Main layout: feed left, sidebar right -->
        <div class="dash-body">

            <!-- â”€â”€ LEFT: Update Feed â”€â”€ -->
            <section class="dash-feed">

                <div class="feed-header">
                    <h2 class="feed-title">Collaborator Updates</h2>
                    <div class="feed-subtitle">What's happening in Alithia</div>
                </div>

                <!-- Filter bar -->
                <div class="filter-bar" id="filterBar">
                    <button class="filter-chip active" data-uid="all">All Updates</button>
                </div>

                <!-- Post composer -->
                <div class="composer" id="composer">
                    <div class="composer-header">
                        <span class="composer-avatar" id="composerAvatar">?</span>
                        <span class="composer-name" id="composerName">â€”</span>
                    </div>
                    <textarea id="postContent"
                              class="composer-textarea"
                              placeholder="Share a progress update, lore note, or world-building thoughtâ€¦"
                              maxlength="1000"
                              rows="3"></textarea>
                    <div class="composer-footer">
                        <span class="char-count" id="charCount">0 / 1000</span>
                        <button class="post-btn" id="postBtn">Post Update</button>
                    </div>
                </div>

                <!-- Feed list -->
                <div class="feed-list" id="feedList">
                    <div class="feed-loading" id="feedLoading">
                        <span class="loading-rune">áš </span>
                        <span>Loading the chronicleâ€¦</span>
                    </div>
                </div>

            </section>

            <!-- â”€â”€ RIGHT: Sidebar â”€â”€ -->
            <aside class="dash-sidebar">

                <!-- Collaborator profile card -->
                <div class="sidebar-card profile-card">
                    <div class="profile-avatar" id="profileAvatar">?</div>
                    <div class="profile-name" id="profileName">â€”</div>
                    <div class="profile-role">Collaborator</div>
                    <div class="profile-since" id="profileSince">â€”</div>
                </div>

                <!-- Stats card -->
                <div class="sidebar-card stats-card">
                    <div class="card-label">Your Contributions</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value" id="statPosts">â€”</div>
                            <div class="stat-label">Updates Posted</div>
                        </div>
                        <div class="stat-divider"></div>
                        <div class="stat">
                            <div class="stat-value" id="statDays">â€”</div>
                            <div class="stat-label">Days Active</div>
                        </div>
                    </div>
                </div>

                <!-- Quick links card -->
                <div class="sidebar-card links-card">
                    <div class="card-label">Quick Navigation</div>
                    <nav class="quick-links">
                        <a href="worldmap.html" class="quick-link">
                            <span class="ql-icon">ðŸ—º</span>
                            <span>World Map</span>
                            <span class="ql-arrow">â†’</span>
                        </a>
                        <a href="lore.html" class="quick-link">
                            <span class="ql-icon">ðŸ“œ</span>
                            <span>Lore Codex</span>
                            <span class="ql-arrow">â†’</span>
                        </a>
                        <a href="factions.html" class="quick-link">
                            <span class="ql-icon">âš”</span>
                            <span>Factions</span>
                            <span class="ql-arrow">â†’</span>
                        </a>
                        <a href="characters.html" class="quick-link">
                            <span class="ql-icon">ðŸ‘¤</span>
                            <span>Characters</span>
                            <span class="ql-arrow">â†’</span>
                        </a>
                    </nav>
                </div>

                <!-- Collaborators card -->
                <div class="sidebar-card collab-card">
                    <div class="card-label">The Collaboration â€” <span id="collabCount">0</span> members</div>
                    <div class="collab-list" id="collabList">
                        <div class="collab-loading">Gathering the scribesâ€¦</div>
                    </div>
                </div>

            </aside>
        </div>
    </div>

    <!-- Profile modal -->
    <div class="profile-modal-backdrop hidden" id="profileModalBackdrop">
        <div class="profile-modal" id="profileModal">
            <button class="modal-close" id="modalClose">âœ•</button>
            <div class="modal-avatar" id="modalAvatar">?</div>
            <div class="modal-name" id="modalName">â€”</div>
            <div class="modal-role">Collaborator</div>
            <div class="modal-meta">
                <span id="modalPosts">â€” posts</span>
                <span class="modal-meta-dot">Â·</span>
                <span id="modalJoined">â€”</span>
            </div>
            <div class="modal-divider"></div>
            <div class="modal-recent-label">Recent Updates</div>
            <div class="modal-recent-list" id="modalRecentList">
                <div class="modal-loading">Loadingâ€¦</div>
            </div>
            <button class="modal-filter-btn" id="modalFilterBtn">
                View All Their Updates â†’
            </button>
        </div>
    </div>

    <script src="../js/navigation.js"></script>
    <script type="module" src="../js/dashboard.js"></script>
</body>
</html>